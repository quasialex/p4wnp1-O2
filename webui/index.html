<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P4wnP1-O2 Control</title>
    <link href="https://cdn.jsdelivr.net/npm/quasar@1.22.10/dist/quasar.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quasar@1.22.10/dist/quasar.umd.min.js"></script>
</head>
<body>
<div id="q-app">
    <q-layout view="hHh Lpr lff">
        <q-header elevated class="bg-primary text-white">
            <q-toolbar>
                <q-toolbar-title>P4wnP1-O2 Web UI</q-toolbar-title>
            </q-toolbar>
            <q-tabs v-model="tab" class="text-white" inline-label>
                <q-tab name="payloads" label="Payloads" />
                <q-tab name="log" label="Run Log" />
            </q-tabs>
        </q-header>
        <q-page-container>
            <q-page v-show="tab === 'payloads'" class="q-pa-md">
                <q-btn label="Refresh" color="primary" @click="fetchPayloads"></q-btn>
                <q-list bordered class="q-mt-md">
                    <q-item v-for="(info, name) in payloads" :key="name">
                        <q-item-section>{{ name }}</q-item-section>
                        <q-item-section side>
                            <q-toggle v-model="info.enabled" @input="toggleEnabled(name, info.enabled)" class="q-mr-sm"/>
                            <q-btn dense color="secondary" label="Run" @click="runPayload(name)" :disable="!info.enabled"></q-btn>
                        </q-item-section>
                    </q-item>
                </q-list>
            </q-page>
            <q-page v-show="tab === 'log'" class="q-pa-md">
                <q-btn label="Refresh" color="primary" @click="fetchLog"></q-btn>
                <q-scroll-area class="q-mt-md" style="height:400px">
                    <pre>{{ logText }}</pre>
                </q-scroll-area>
            </q-page>
        </q-page-container>
    </q-layout>
</div>
<script src="main.js"></script>
</body>
</html>
