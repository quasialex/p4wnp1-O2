<VirtualHost *:80>
    ServerName p4wnp1.portal
    DocumentRoot /var/www/p4wnp1-portal

    <Directory /var/www/p4wnp1-portal>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Simple captive redirects for common OS probes
    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/generate_204$ [OR]
    RewriteCond %{HTTP:User-Agent} (CaptiveNetworkSupport|CaptivePortal|Microsoft NCSI) [NC]
    RewriteRule ^.*$ /index.html [R=302,L]

    ErrorLog ${APACHE_LOG_DIR}/p4wnp1-portal_error.log
    CustomLog ${APACHE_LOG_DIR}/p4wnp1-portal_access.log combined
</VirtualHost>
